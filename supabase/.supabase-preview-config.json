{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Supabase GitHub Integration expected configuration for Preview Branches",
  "project_ref": "spdtwktxdalcfigzeqrz",
  "github_integration": {
    "enabled": true,
    "preview_branches": {
      "enabled": true,
      "watched_directory": "supabase/",
      "trigger_file": "supabase/.preview-trigger",
      "note": "IMPORTANT: The Supabase dashboard must be configured to watch 'supabase/' NOT 'supabase/supabase/'"
    }
  },
  "repo_structure": {
    "supabase_root": "supabase/",
    "config_file": "supabase/config.toml",
    "migrations_dir": "supabase/migrations/",
    "functions_dir": "supabase/functions/",
    "seeds_dir": "supabase/seeds/"
  },
  "path_detection_fix": {
    "issue": "Preview branching not triggering when PR has no changes under supabase/",
    "solution": "Add .preview-trigger file to ensure path detection works",
    "verification": "Run: git diff --name-only origin/main...HEAD | grep '^supabase/'"
  },
  "dashboard_settings_checklist": [
    "Navigate to: https://supabase.com/dashboard/project/spdtwktxdalcfigzeqrz/settings/integrations",
    "Under GitHub Integration > Preview Branches",
    "Set 'Supabase directory' to: supabase/",
    "NOT: supabase/supabase/ (current misconfiguration)"
  ]
}
