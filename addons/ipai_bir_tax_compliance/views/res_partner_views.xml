<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherit Partner Form to add TIN -->
    <record id="view_partner_form_bir" model="ir.ui.view">
        <field name="name">res.partner.form.bir</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <field name="vat" position="after">
                <field name="tin" placeholder="XXX-XXX-XXX-XXX"/>
                <field name="tin_branch_code"/>
            </field>
            <page name="internal_notes" position="before">
                <page string="BIR Information" name="bir_info">
                    <group>
                        <group string="Tax Registration">
                            <field name="tax_type"/>
                            <field name="bir_registered"/>
                            <field name="bir_registration_date" invisible="not bir_registered"/>
                        </group>
                        <group string="Identification">
                            <field name="tin"/>
                            <field name="tin_branch_code"/>
                        </group>
                    </group>
                    <div>
                        <button name="action_validate_tin_with_bir"
                                string="Validate TIN"
                                type="object"
                                class="btn-secondary"
                                invisible="not tin"/>
                    </div>
                </page>
            </page>
        </field>
    </record>

    <!-- TIN column in partner list -->
    <record id="view_partner_tree_bir" model="ir.ui.view">
        <field name="name">res.partner.tree.bir</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <field name="email" position="after">
                <field name="tin" optional="show"/>
            </field>
        </field>
    </record>
</odoo>
