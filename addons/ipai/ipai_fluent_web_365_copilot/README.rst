======================
Fluent Web 365 Copilot
======================

.. image:: https://img.shields.io/badge/licence-AGPL--3-blue.svg
   :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
   :alt: License: AGPL-3

.. image:: https://img.shields.io/badge/Odoo-18.0-purple.svg
   :alt: Odoo Version

.. image:: https://img.shields.io/badge/status-prototype-orange.svg
   :alt: Development Status: Prototype

A **prototype module** demonstrating a SAP Joule / Microsoft 365 Copilot / Kapa AI–style
AI assistant embedded in Odoo's web client.

**Important:** This is a UX prototype only. It does not contain real AI functionality.
The purpose is to validate user experience flows, screen hierarchy, and interaction
patterns before implementing actual AI integrations.

Purpose
=======

This module demonstrates how an intelligent assistant ("Copilot") would appear and
behave within Odoo, providing:

- Natural-language help and navigation
- Record-context awareness
- KPI summaries and explanations
- Suggested actions and next steps

It serves as a design artifact for stakeholders to evaluate the proposed UX before
investing in production AI integrations.

Features
========

Copilot Side Panel
------------------

- Dedicated "Copilot" application with session management
- Chat-style conversation interface
- Support for different message types (questions, explanations, KPIs, navigation hints)
- Session history and archiving

Smart Button Integration
------------------------

- "Ask Copilot" button on Project Tasks (extensible to other models)
- Automatic session creation bound to the current record
- Context-aware welcome messages

Predefined Intents
------------------

- Configurable intent library (Summarize, Explain, Show KPIs, Navigate, etc.)
- Category-based organization (General, Finance, Project, CRM)
- Applicable model filtering

Mock AI Responses
-----------------

- Keyword-based response generation for demonstration
- Simulated confidence scores and latency
- Mock token usage tracking

Demo Data
---------

- Sample sessions for Project and Finance contexts
- Rich example conversations showing various message types
- Realistic mock data illustrating intended behavior

Usage
=====

Opening the Copilot App
-----------------------

1. Navigate to the **Copilot** application from the main menu
2. View your active sessions under "My Sessions"
3. Click on a session to view the conversation history

Using the Smart Button
----------------------

1. Open any **Project Task** record
2. Click the **Ask Copilot** button in the top-right button box
3. A new session opens (or the most recent active session)
4. Type your question and the mock AI will respond

Reading Sample Sessions
-----------------------

1. Go to **Copilot** → **Sessions** → **All Sessions**
2. Open "Copilot Demo: Project Task Analysis" or "Copilot Demo: Invoice Analysis"
3. Review the conversation to understand the intended UX

Configuring Intents
-------------------

1. Go to **Copilot** → **Configuration** → **Intents**
2. View or modify available intents
3. Adjust categories, icons, and applicable models

Design Notes
============

What Is Deliberately Mocked
---------------------------

- **AI Responses:** All assistant messages are generated by simple keyword matching,
  not actual AI models. The content is hardcoded to demonstrate the desired format.

- **Token Counting:** Token usage is simulated (word count approximation).

- **Latency:** Response times are mock values for demonstration.

- **Context Analysis:** The system does not actually read or analyze bound records;
  it simply displays placeholder content.

Intended AI Integration Points
------------------------------

In a production implementation, the following would be replaced with real functionality:

1. **Message Generation:** Replace ``_generate_mock_response()`` with calls to:
   - OpenAI GPT-4 / GPT-4o
   - Anthropic Claude
   - Azure OpenAI Service
   - Local LLM via Ollama

2. **Context Injection:** Before calling the AI, inject:
   - Record field values
   - Related record summaries
   - User preferences and permissions

3. **Intent Recognition:** Use NLU/LLM to classify user messages into intents
   and route to specialized handlers.

4. **Streaming Responses:** Implement SSE or WebSocket for real-time response streaming.

5. **Action Execution:** Allow the AI to trigger Odoo actions (with proper permissions).

Limitations vs. Real SAP Joule / Microsoft Copilot
--------------------------------------------------

This prototype does not include:

- Actual AI/LLM integration
- Real context analysis of records
- Action execution capabilities
- Voice input/output
- Enterprise-grade security controls
- Audit logging for AI interactions
- Rate limiting and token budgets
- Multi-turn context management
- Feedback/rating collection

Roadmap
=======

Phase 1: Prototype (Current)
----------------------------

- [x] Basic session and message models
- [x] Chat-style UI
- [x] Smart button integration on Project Tasks
- [x] Demo data and mock responses
- [x] Intent configuration

Phase 2: AI Bridge
------------------

- [ ] Create ``ipai_copilot_bridge`` module for AI provider integration
- [ ] Implement OpenAI/Claude connectors
- [ ] Add prompt template management
- [ ] Implement context injection from records

Phase 3: Domain Modules
-----------------------

- [ ] ``ipai_copilot_finance`` - Specialized finance intents and context
- [ ] ``ipai_copilot_project`` - Project management helpers
- [ ] ``ipai_copilot_crm`` - Sales and CRM assistance
- [ ] ``ipai_copilot_helpdesk`` - Support ticket analysis

Phase 4: Production Hardening
-----------------------------

- [ ] Enterprise security controls
- [ ] Audit logging and compliance
- [ ] Rate limiting and token budgets
- [ ] Feedback collection and analytics
- [ ] A/B testing framework

Handoff Notes
=============

When transitioning from prototype to production:

1. **Module Split:**
   - Keep ``fluent_web_365_copilot`` as the UI/UX layer
   - Create ``ipai_copilot_bridge`` for AI provider abstraction
   - Create domain-specific modules for specialized intents

2. **Security Implementation:**
   - Add per-user session isolation (already partially present)
   - Implement record access verification before context injection
   - Add audit logging for all AI interactions
   - Consider data retention policies

3. **AI Provider Configuration:**
   - Use ``res.config.settings`` for API keys and endpoints
   - Support multiple providers with fallback
   - Implement token budgets per user/company

4. **Performance Considerations:**
   - Implement response streaming for long generations
   - Cache frequently-requested analyses
   - Consider background jobs for complex analyses

Credits
=======

Authors
-------

* InsightPulse AI

Contributors
------------

* Joel Tolentino <joel@insightpulse.ai>

Maintainers
-----------

This module is maintained by InsightPulse AI.

.. image:: https://img.shields.io/badge/maintainer-InsightPulse%20AI-blue.svg
   :target: https://github.com/jgtolentino/odoo-ce
   :alt: Maintainer: InsightPulse AI

Acknowledgments
---------------

Inspired by:

- `SAP Joule <https://www.sap.com/products/artificial-intelligence/ai-assistant.html>`_
- `Microsoft 365 Copilot <https://www.microsoft.com/en-us/microsoft-365/copilot>`_
- `Kapa.ai <https://www.kapa.ai/>`_

License
=======

This module is licensed under AGPL-3.0. See the LICENSE file for details.

.. image:: https://www.gnu.org/graphics/agplv3-155x51.png
   :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
   :alt: License: AGPL-3
