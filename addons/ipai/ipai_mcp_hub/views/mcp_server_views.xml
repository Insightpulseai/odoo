<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- MCP Server: Form View -->
    <record id="view_mcp_server_form" model="ir.ui.view">
        <field name="name">ipai.mcp.server.form</field>
        <field name="model">ipai.mcp.server</field>
        <field name="arch" type="xml">
            <form string="MCP Server">
                <header>
                    <button name="action_check_health" type="object"
                            string="Check Health" class="btn-secondary"
                            icon="fa-heartbeat"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="%(action_mcp_tool)d" type="action"
                                class="oe_stat_button" icon="fa-wrench"
                                context="{'default_server_id': active_id, 'search_default_server_id': active_id}">
                            <field name="tool_count" widget="statinfo" string="Tools"/>
                        </button>
                    </div>
                    <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="e.g., Supabase MCP"/>
                        </h1>
                    </div>
                    <group>
                        <group string="Server Configuration">
                            <field name="code"/>
                            <field name="category"/>
                            <field name="transport"/>
                            <field name="active" invisible="1"/>
                        </group>
                        <group string="Connection">
                            <field name="base_url" widget="url" invisible="transport == 'stdio'"/>
                            <field name="command" invisible="transport != 'stdio'"/>
                            <field name="env_key_name"/>
                        </group>
                    </group>
                    <group>
                        <group string="Classification">
                            <field name="sequence"/>
                            <field name="tags"/>
                        </group>
                        <group string="Health">
                            <field name="health_status" widget="badge"
                                   decoration-success="health_status == 'healthy'"
                                   decoration-warning="health_status == 'degraded'"
                                   decoration-danger="health_status == 'down'"/>
                            <field name="last_health_check"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- MCP Server: List View -->
    <record id="view_mcp_server_list" model="ir.ui.view">
        <field name="name">ipai.mcp.server.list</field>
        <field name="model">ipai.mcp.server</field>
        <field name="arch" type="xml">
            <list string="MCP Servers">
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="code"/>
                <field name="category"/>
                <field name="transport"/>
                <field name="health_status" widget="badge"
                       decoration-success="health_status == 'healthy'"
                       decoration-warning="health_status == 'degraded'"
                       decoration-danger="health_status == 'down'"/>
                <field name="tool_count"/>
                <field name="company_id" groups="base.group_multi_company"/>
            </list>
        </field>
    </record>

    <!-- MCP Server: Action -->
    <record id="action_mcp_server" model="ir.actions.act_window">
        <field name="name">MCP Servers</field>
        <field name="res_model">ipai.mcp.server</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'search_default_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Register your first MCP server
            </p>
            <p>
                Add MCP servers like Supabase, GitHub, DigitalOcean to enable agent tool access.
            </p>
        </field>
    </record>
</odoo>
