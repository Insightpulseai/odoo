# =============================================================================
# OCA Module Allowlist for Odoo 19 CE
# =============================================================================
# This file defines the curated list of OCA modules to install.
# Module names are derived from docs/oca/ADDON_INVENTORY.json - no guessing!
#
# RULES:
#   1. Never use TODO_* placeholders - get real names from inventory
#   2. Install order matters - dependencies must come first
#   3. CI will validate all modules exist before install
#
# Regenerate inventory: ./scripts/oca/generate_inventory.sh
# Validate allowlist:   ./scripts/oca/clean_install_allowlist.sh
# =============================================================================

meta:
  odoo_version: "19.0"
  purpose: "Curated OCA modules for CE Enterprise Parity"
  last_updated: "2026-01-29"
  inventory_count: 288

# Install order - packs are installed in this sequence
install_order:
  - foundation
  - web_ux
  - accounting_core
  - accounting_reconcile
  - accounting_statements
  - purchase_workflow
  - hr_modules
  - project_timesheet
  - crm_extensions
  - reporting

# Module packs - grouped by functional area
# ALL modules verified to exist in docs/oca/ADDON_NAMES.txt
packs:
  # Foundation: Server tools and base infrastructure (install first)
  foundation:
    - base_exception
    - base_rest
    - base_rest_auth_api_key
    - base_rest_pydantic
    - base_technical_features
    - base_technical_user
    - base_view_inheritance_extension
    - component
    - component_event
    - connector
    - extendable
    - extendable_fastapi
    - fastapi
    - fastapi_auth_api_key
    - fastapi_auth_jwt
    - pydantic
    - server_environment
    - server_environment_data_encryption
    - auditlog
    - date_range

  # Web UX: Frontend improvements
  web_ux:
    - web_dialog_size
    - web_environment_ribbon
    - web_favicon
    - web_ir_actions_act_window_message
    - web_remember_tree_column_width
    - web_responsive
    - web_search_with_and

  # Accounting Core: Financial management base
  accounting_core:
    - account_financial_report
    - account_journal_restrict_mode
    - account_move_name_sequence
    - account_move_tier_validation
    - account_tax_balance
    - account_usability
    - account_reconcile_oca
    - account_reconcile_model_oca

  # Accounting Reconcile: Reconciliation tools
  accounting_reconcile:
    - account_reconcile_oca_add_default_filters
    - account_partner_reconcile

  # Accounting Statements: Bank statement processing
  accounting_statements:
    - account_statement_base
    - account_statement_import_base
    - account_statement_import_file
    - account_statement_import_file_reconcile_oca
    - account_statement_import_camt
    - account_statement_import_camt54
    - account_statement_import_ofx

  # Purchase Workflow: Procurement improvements
  purchase_workflow:
    - purchase_advance_payment
    - purchase_exception
    - purchase_order_approval_block
    - purchase_order_line_sequence
    - purchase_tier_validation
    - purchase_request
    - purchase_request_tier_validation

  # HR Modules: Human resources (available in inventory)
  hr_modules:
    - hr_employee_firstname
    - hr_timesheet_task_stage
    - hr_timesheet_time_control

  # Project & Timesheet
  project_timesheet:
    - project_task_default_stage
    - project_task_stage_mgmt
    - project_task_stage_state
    - project_task_pull_request

  # CRM Extensions: Sales pipeline improvements
  crm_extensions:
    - crm_lead_code
    - crm_lead_currency
    - crm_lead_firstname
    - crm_industry
    - crm_phonecall
    - crm_stage_probability

  # Reporting: Reports and exports
  reporting:
    - report_xlsx
    - report_xlsx_helper
    - report_xml
    - mis_builder
    - mis_builder_budget
    - partner_statement

  # Document management (separate - document_url only available)
  documents:
    - document_url

# AI Integration (optional - experimental)
ai_pack:
  - ai_oca_bridge
  - ai_oca_bridge_chatter
  - ai_oca_bridge_document_page

# Policy enforcement
policy:
  require_all_modules_installed: true
  fail_if_module_not_found: true
  skip_missing_in_dry_run: true
