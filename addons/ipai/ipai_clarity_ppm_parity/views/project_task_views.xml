<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Task Form View Extension for Clarity Fields -->
    <record id="view_task_form_clarity" model="ir.ui.view">
        <field name="name">project.task.form.clarity</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='project_hours']" position="after">
                <group string="Clarity PPM" name="clarity_ppm">
                    <field name="wbs_code" readonly="1"/>
                    <field name="critical_path" readonly="1"/>
                    <field name="total_float" readonly="1"/>
                    <field name="free_float" readonly="1"/>
                </group>
                <group string="Resource Management">
                    <field name="resource_allocation"/>
                    <field name="planned_hours"/>
                    <field name="actual_hours" readonly="1"/>
                    <field name="remaining_hours"/>
                </group>
                <group string="Earned Value Management">
                    <field name="planned_value"/>
                    <field name="earned_value" readonly="1"/>
                    <field name="actual_cost"/>
                    <field name="schedule_variance" readonly="1"/>
                    <field name="cost_variance" readonly="1"/>
                </group>
                <group string="Dependencies">
                    <field name="lag_days"/>
                    <field name="lead_days"/>
                </group>
            </xpath>
        </field>
    </record>

    <!-- Task Tree View Extension -->
    <record id="view_task_tree_clarity" model="ir.ui.view">
        <field name="name">project.task.tree.clarity</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='stage_id']" position="after">
                <field name="wbs_code" optional="hide"/>
                <field name="critical_path" optional="hide"/>
                <field name="total_float" optional="hide"/>
                <field name="planned_value" optional="hide"/>
                <field name="earned_value" optional="hide"/>
            </xpath>
        </field>
    </record>

    <!-- Task Search View Extension -->
    <record id="view_task_search_clarity" model="ir.ui.view">
        <field name="name">project.task.search.clarity</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_search_form"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='my_tasks']" position="after">
                <filter string="Critical Path" name="critical_path"
                        domain="[('critical_path', '=', True)]"/>
                <filter string="Has Float" name="has_float"
                        domain="[('total_float', '>', 0)]"/>
            </xpath>
        </field>
    </record>

</odoo>
