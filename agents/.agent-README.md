# Insightpulse Agent Registry

This directory (`.agent`) contains the canonical definition for organizational agents, sub-agents, and ground-truth skills.

## Architecture

The system relies on three discrete components:

1. **Coordinator Options** (`.agent/coordinator`): Houses the routing logic, output contracts, and policies for directing tasks.
2. **Sub-agents** (`.agent/subagents`): Thin, runtime-agnostic persona definitions (e.g., `git-expert`, `repo-expert`, `devops-expert`) featuring isolated `agent.yaml`, `prompt.md`, `playbooks/`, and `evals/`.
3. **Skills** (`.agent/skills`): Reproducible semantic knowledge packs derived from documented SSOTs (e.g. `github_docs`). Each skill carries a chunking schema, citations policy, and evaluation cases.

## Adding Future Sub-Agents

1. Create a new folder under `.agent/subagents/{agent_name}` containing a basic `agent.yaml` and `prompt.md`.
2. Add the agent to `.agent/subagents/registry.yaml`.
3. Update `.agent/coordinator/policies/routing_policy.md` explicitly defining the triggers that route to the new agent.
4. Add the appropriate test conditions to `evals/`.

## Adding Knowledge Skills

1. Create a `skill.yaml` and `sources.yaml` under `.agent/skills/{skill_name}`.
2. Ensure you strictly define `allowed_domains` to prevent hallucinations outside of the SSOT target.

## Invoking Commands (Spec Kit Compatibility)

The sub-agents in `.agent/subagents/` are also packaged as Spec Kit-compatible **commands**.
You can route context immediately to an expert agent by installing this directory in your AI orchestrator:

- **Generic Mode**: Start the agent with `--ai-commands-dir .agent/commands-subagents` or configure `commands_subdir`.
- **Available Commands**:
  - `/git.expert` - Rebasing, hygiene, history.
  - `/devops.expert` - Actions, deploys, observability.
  - `/repo.expert` - Monorepo architecture, spec kit tracking.

All commands enforce the absolute layout defined in `docs/agents/output_contract.md`. If your orchestrator does not support slash commands, fall back to installing the `skills/subagents/*.prompt.md` profiles directly.
