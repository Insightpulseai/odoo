[options]
; ============================================================
; InsightPulse AI â€” Production Odoo Config (Canonical)
; - App host: odoo-prod (178.128.112.214)
; - DB: DO Managed Postgres (odoo-db-sgp1, PG16)
; - Single allowed Odoo DB: odoo_prod (enforced by dbfilter)
; Secrets MUST be provided via env / secret store; never commit.
; ============================================================

; --- reverse proxy / routing ---
proxy_mode = True

; --- database (managed postgres) ---
; Use envs / deployment templating to fill these values.
db_host = ${ODOO_DB_HOST}
db_port = ${ODOO_DB_PORT}
db_user = ${ODOO_DB_USER}
db_password = ${ODOO_DB_PASSWORD}
db_name = odoo_prod
db_sslmode = require

; Force ONLY the canonical database
dbfilter = ^odoo_prod$

; --- addons path (OCA + IPAI) ---
; /mnt/oca/* subdirectories are bind-mounted from addons/OCA/ in the compose file.
; All 20 active OCA repo groups must be listed here; invalid paths are silently skipped.
addons_path = /usr/lib/python3/dist-packages/odoo/addons,/mnt/oca/account-financial-reporting,/mnt/oca/account-financial-tools,/mnt/oca/account-reconcile,/mnt/oca/ai,/mnt/oca/automation,/mnt/oca/bank-payment,/mnt/oca/bank-statement-import,/mnt/oca/connector,/mnt/oca/contract,/mnt/oca/dms,/mnt/oca/helpdesk,/mnt/oca/hr,/mnt/oca/hr-expense,/mnt/oca/knowledge,/mnt/oca/mail,/mnt/oca/manufacture,/mnt/oca/mis-builder,/mnt/oca/partner-contact,/mnt/oca/payroll,/mnt/oca/project,/mnt/oca/purchase-workflow,/mnt/oca/queue,/mnt/oca/reporting-engine,/mnt/oca/rest-framework,/mnt/oca/sale-workflow,/mnt/oca/server-auth,/mnt/oca/server-backend,/mnt/oca/server-brand,/mnt/oca/server-env,/mnt/oca/server-tools,/mnt/oca/server-ux,/mnt/oca/social,/mnt/oca/spreadsheet,/mnt/oca/storage,/mnt/oca/timesheet,/mnt/oca/web,/mnt/extra-addons

; --- core ports ---
http_port = 8069

; --- performance baseline (8GB droplet) ---
workers = 2
max_cron_threads = 1
db_maxconn = 20

; Soft/Hard memory limits (bytes)
limit_memory_soft = 2147483648
limit_memory_hard = 2684354560

; Request time caps (seconds)
limit_time_cpu = 600
limit_time_real = 1200
limit_request = 8192

; --- logging ---
log_level = info
log_handler = :INFO,odoo.addons.base.models.ir_asset:DEBUG,odoo.http:INFO,werkzeug:INFO
