<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Extend task form with Finance & BIR tabs -->
    <record id="view_task_form_finance_closing" model="ir.ui.view">
      <field name="name">project.task.form.finance.closing</field>
      <field name="model">project.task</field>
      <field name="inherit_id" ref="project.view_task_form2"/>
      <field name="arch" type="xml">
        <xpath expr="//sheet/notebook" position="inside">
          <page string="Finance Closing">
            <group>
              <field name="cluster" optional="show"/>
              <field name="relative_due" optional="show"/>
              <field name="closing_due_date" optional="show"/>
            </group>
            <group>
              <field name="owner_code" optional="show"/>
              <field name="reviewer_id" optional="show"/>
              <field name="approver_id" optional="show"/>
            </group>
            <group>
              <field name="auto_sync" optional="show"/>
              <field name="erp_ref" optional="show"/>
            </group>
          </page>
          <page string="BIR Filing">
            <group>
              <field name="bir_related" optional="show"/>
              <field name="bir_form" optional="show"/>
              <field name="bir_period_label" optional="show"/>
            </group>
            <group>
              <field name="bir_deadline" optional="show"/>
              <field name="bir_prep_due_date" optional="show"/>
              <field name="bir_approval_due_date" optional="show"/>
              <field name="bir_payment_due_date" optional="show"/>
            </group>
            <group>
              <field name="finance_supervisor_id" optional="show"/>
              <field name="sfm_id" optional="show"/>
              <field name="fd_id" optional="show"/>
            </group>
          </page>
        </xpath>
      </field>
    </record>

    <!-- Optional: list view with finance fields visible -->
    <record id="view_task_finance_list" model="ir.ui.view">
      <field name="name">project.task.list.finance</field>
      <field name="model">project.task</field>
      <field name="inherit_id" ref="project.view_task_tree2"/>
      <field name="arch" type="xml">
        <xpath expr="//list" position="attributes">
          <attribute name="create">true</attribute>
        </xpath>
        <xpath expr="//field[@name='name']" position="after">
          <field name="cluster" optional="show"/>
          <field name="relative_due" optional="show"/>
          <field name="closing_due_date" optional="show"/>
          <field name="owner_code" optional="show"/>
          <field name="reviewer_id" optional="show"/>
          <field name="approver_id" optional="show"/>
          <field name="bir_form" optional="show"/>
          <field name="bir_period_label" optional="show"/>
          <field name="bir_deadline" optional="show"/>
        </xpath>
      </field>
    </record>
</odoo>
