<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Cron job for processing queued OCR jobs -->
        <record id="ir_cron_process_expense_ocr" model="ir.cron">
            <field name="name">IPAI Expense OCR: Process Queue</field>
            <field name="model_id" ref="model_ipai_expense_ocr_result"/>
            <field name="state">code</field>
            <field name="code">
# Process queued OCR jobs
queued = env['ipai.expense.ocr.result'].search([
    ('state', '=', 'queued'),
], limit=10)
for result in queued:
    try:
        result.action_extract()
    except Exception as e:
        result.state = 'failed'
        result.error_message = str(e)
            </field>
            <field name="interval_number">2</field>
            <field name="interval_type">minutes</field>
            <field name="numbercall">-1</field>
            <field name="active">True</field>
        </record>
    </data>
</odoo>
