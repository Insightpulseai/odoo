# Superset Configuration Environment Variables
# Copy this file to .env and fill in your actual values

# =============================================================================
# Core Superset Settings
# =============================================================================
# Secret key for session encryption (generate with: openssl rand -base64 42)
SUPERSET_SECRET_KEY="CHANGE_ME_generate_with_openssl_rand_base64_42"

# Guest token JWT settings for embedded dashboards
# Generate with: openssl rand -base64 32
SUPERSET_GUEST_TOKEN_JWT_SECRET="CHANGE_ME_generate_with_openssl_rand_base64_32"
SUPERSET_GUEST_TOKEN_JWT_AUD="superset"

# =============================================================================
# Database Configuration (DigitalOcean Managed PostgreSQL)
# =============================================================================
# Get these from DigitalOcean Console → Databases → Your Postgres Cluster
DO_PG_HOST="your-postgres-host.db.ondigitalocean.com"
DO_PG_PORT="25060"
DO_PG_USER="doadmin"
DO_PG_PASSWORD="CHANGE_ME_your_postgres_password"
DB_SUPERSET="superset"
DO_PG_SSLMODE="require"

# Constructed URI (auto-generated from above variables in superset_config.py)
# SUPERSET_DATABASE_URI="postgresql+psycopg2://${DO_PG_USER}:${DO_PG_PASSWORD}@${DO_PG_HOST}:${DO_PG_PORT}/${DB_SUPERSET}?sslmode=${DO_PG_SSLMODE}"

# =============================================================================
# Redis Configuration (for caching and Celery)
# =============================================================================
# Option 1: DigitalOcean Managed Redis
REDIS_HOST="your-redis-host.db.ondigitalocean.com"
REDIS_PORT="25061"
REDIS_PASSWORD="CHANGE_ME_your_redis_password"

# Option 2: Local Redis (for development)
# REDIS_HOST="redis"
# REDIS_PORT="6379"
# REDIS_PASSWORD=""

# Constructed URL (for Redis with auth)
# SUPERSET_REDIS_URL="redis://default:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0"

# =============================================================================
# DigitalOcean Access Token (for deployments)
# =============================================================================
# Get this from: https://cloud.digitalocean.com/account/api/tokens
DOCTL_ACCESS_TOKEN="CHANGE_ME_dop_v1_your_digitalocean_token"

# Also used as:
DO_ACCESS_TOKEN="${DOCTL_ACCESS_TOKEN}"
DIGITALOCEAN_ACCESS_TOKEN="${DOCTL_ACCESS_TOKEN}"

# =============================================================================
# Optional: Odoo Integration
# =============================================================================
# If connecting to Odoo for data sources
ODOO_URL="https://erp.insightpulseai.com"
ODOO_DB="odoo"
ODOO_API_KEY="CHANGE_ME_your_odoo_api_key"

# =============================================================================
# Development vs Production
# =============================================================================
# Set to 'development' or 'production'
SUPERSET_ENV="development"

# Development settings
SUPERSET_LOAD_EXAMPLES="no"
FLASK_ENV="development"
FLASK_DEBUG="1"

# =============================================================================
# Security Notes
# =============================================================================
# NEVER commit this file with real credentials!
# Add .env to .gitignore
# Use GitHub Secrets for CI/CD deployments
# Rotate secrets regularly

# =============================================================================
# Quick Setup Commands
# =============================================================================
# Generate SUPERSET_SECRET_KEY:
#   openssl rand -base64 42
#
# Generate SUPERSET_GUEST_TOKEN_JWT_SECRET:
#   openssl rand -base64 32
#
# Copy this file:
#   cp .env.example .env
#
# Edit with your values:
#   nano .env  # or vim .env
#
# Test configuration:
#   docker compose -f docker-compose.superset.yml config
