# Mailgun DNS Verification Checklist

**Domain:** mg.insightpulseai.net
**Date:** 2026-01-20
**Status:** PENDING_EXECUTION

## DNS Records Status

Based on user-provided configuration (requires live verification):

| Record | Type | Expected Value | Status |
|--------|------|----------------|--------|
| SPF | TXT @ mg.insightpulseai.net | `v=spf1 include:mailgun.org ~all` | ⏳ Pending verification |
| DKIM | TXT @ pic._domainkey.mg.insightpulseai.net | Public key for DKIM signing | ⏳ Pending verification |
| DMARC | TXT @ _dmarc.mg.insightpulseai.net | `v=DMARC1; p=none; pct=100; fo=1; ...` | ⏳ Pending verification |
| MX Primary | MX @ mg.insightpulseai.net | `10 mxa.mailgun.org` | ⏳ Pending verification |
| MX Secondary | MX @ mg.insightpulseai.net | `10 mxb.mailgun.org` | ⏳ Pending verification |
| Tracking CNAME | CNAME @ email.mg.insightpulseai.net | `mailgun.org` | ⏳ Pending verification |

## Execution Instructions

Run the following scripts on a server with network access:

```bash
# 1. Verify DNS records
./scripts/mailgun/verify_dns.sh

# 2. Test SMTP connection
./scripts/mailgun/test_smtp.sh

# 3. Setup webhooks (requires MAILGUN_API_KEY)
export MAILGUN_API_KEY=key-xxxxx
./scripts/mailgun/setup_webhooks.sh

# 4. Send test email
./scripts/mailgun/send_test_email.sh your-email@example.com
```

## Integration Checklist

- [ ] DNS records verified via `verify_dns.sh`
- [ ] SMTP connection tested via `test_smtp.sh`
- [ ] Webhooks configured via `setup_webhooks.sh`
- [ ] Test email sent and received
- [ ] Mailgun dashboard shows domain verified (green checkmarks)
- [ ] Open/Click/Unsubscribe tracking enabled
- [ ] Webhook signing key obtained and added to env

## Environment Variables

Required environment variables for full integration:

```bash
# Mailgun API
MAILGUN_API_KEY=key-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
MAILGUN_DOMAIN=mg.insightpulseai.net
MAILGUN_WEBHOOK_SIGNING_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# SMTP Settings (for Supabase/Odoo)
SMTP_HOST=smtp.mailgun.org
SMTP_PORT=465
SMTP_USER=postmaster@mg.insightpulseai.net
SMTP_PASSWORD=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SMTP_SENDER_EMAIL=business@insightpulseai.com
```

## DMARC Policy Roadmap

| Phase | Policy | Target Date | Criteria |
|-------|--------|-------------|----------|
| Phase 1 | `p=none` | Now | Initial monitoring |
| Phase 2 | `p=quarantine` | +2-4 weeks | Clean DMARC reports |
| Phase 3 | `p=reject` | +4-8 weeks | High confidence in setup |

## Evidence Files (Generated After Execution)

- `dns_verification.json` - DNS lookup results
- `dns_verification.md` - Human-readable DNS report
- `smtp_test.json` - SMTP connection test results
- `webhook_setup.json` - Webhook configuration results
- `test_email.json` - Test email delivery results

---

*Generated by claude/verify-mailgun-dns-3p1fN*
*Last updated: 2026-01-20*
