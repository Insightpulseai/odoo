{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Documents/GitHub/Insightpulseai/odoo/templates/odooops-console/src/lib/supabase/middleware.ts"],"sourcesContent":["// src/lib/supabase/middleware.ts\nimport { NextResponse, type NextRequest } from \"next/server\";\nimport { createServerClient } from \"@supabase/ssr\";\n\nexport function createSupabaseMiddlewareClient(req: NextRequest) {\n  const res = NextResponse.next();\n\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  if (!url || !anon) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n  }\n\n  const supabase = createServerClient(url, anon, {\n    cookies: {\n      getAll() {\n        return req.cookies.getAll();\n      },\n      setAll(cookiesToSet) {\n        cookiesToSet.forEach(({ name, value, options }) => {\n          res.cookies.set(name, value, options);\n        });\n      },\n    },\n  });\n\n  return { supabase, res };\n}\n"],"names":[],"mappings":";;;;AAAA,iCAAiC;AACjC;AAAA;AACA;AAAA;;;AAEO,SAAS,+BAA+B,GAAgB;IAC7D,MAAM,MAAM,oRAAY,CAAC,IAAI;IAE7B,MAAM;IACN,MAAM;IAEN;;IAIA,MAAM,WAAW,IAAA,2RAAkB,EAAC,KAAK,MAAM;QAC7C,SAAS;YACP;gBACE,OAAO,IAAI,OAAO,CAAC,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;oBAC5C,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBAC/B;YACF;QACF;IACF;IAEA,OAAO;QAAE;QAAU;IAAI;AACzB"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Documents/GitHub/Insightpulseai/odoo/templates/odooops-console/src/middleware.ts"],"sourcesContent":["// src/middleware.ts\nimport { NextResponse, type NextRequest } from \"next/server\";\nimport { createSupabaseMiddlewareClient } from \"@/lib/supabase/middleware\";\n\nexport async function middleware(req: NextRequest) {\n  const { supabase, res } = createSupabaseMiddlewareClient(req);\n\n  // Refresh session if needed (cookie-based)\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  const isAppRoute = req.nextUrl.pathname.startsWith(\"/app\");\n\n  if (isAppRoute && !user) {\n    const url = req.nextUrl.clone();\n    url.pathname = \"/login\";\n    url.searchParams.set(\"next\", req.nextUrl.pathname);\n    return NextResponse.redirect(url);\n  }\n\n  return res;\n}\n\nexport const config = {\n  matcher: [\"/app/:path*\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA,oBAAoB;AACpB;AAAA;AACA;;;AAEO,eAAe,WAAW,GAAgB;IAC/C,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,IAAA,kQAA8B,EAAC;IAEzD,2CAA2C;IAC3C,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,MAAM,aAAa,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAEnD,IAAI,cAAc,CAAC,MAAM;QACvB,MAAM,MAAM,IAAI,OAAO,CAAC,KAAK;QAC7B,IAAI,QAAQ,GAAG;QACf,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ;QACjD,OAAO,oRAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAc;AAC1B"}}]
}