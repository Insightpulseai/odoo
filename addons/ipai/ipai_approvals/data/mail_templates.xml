<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="1">
        <!-- Email Template: Approval Request Pending -->
        <record id="mail_template_approval_request_pending" model="mail.template">
            <field name="name">Approval Request: Pending</field>
            <field name="model_id" ref="model_ipai_approval_request"/>
            <field name="email_from">{{ (object.company_id.email or user.email_formatted) }}</field>
            <field name="email_to">{{ ','.join(object.approver_ids.filtered(lambda a: a.state == 'pending').mapped('user_id.email')) }}</field>
            <field name="subject">Approval Required: {{ object.name }}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Hello,
        <br/><br/>
        A new approval request requires your attention:
        <br/><br/>
        <strong>Request:</strong> {{ object.name }}<br/>
        <strong>Type:</strong> {{ object.type_id.name }}<br/>
        <strong>Requester:</strong> {{ object.user_id.name }}<br/>
        <strong>Submitted:</strong> {{ object.date_submitted }}<br/>
        {% if object.amount %}
        <strong>Amount:</strong> {{ object.amount }} {{ object.currency_id.symbol }}<br/>
        {% endif %}
        <br/>
        <a href="/web#id={{ object.id }}&amp;model=ipai.approval.request&amp;view_type=form"
           style="background-color: #875A7B; padding: 8px 16px; text-decoration: none; color: #fff; border-radius: 5px;">
            View Request
        </a>
        <br/><br/>
        Best regards,<br/>
        {{ object.company_id.name }}
    </p>
</div>
            </field>
            <field name="lang">{{ object.user_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <!-- Email Template: Approval Request Approved -->
        <record id="mail_template_approval_request_approved" model="mail.template">
            <field name="name">Approval Request: Approved</field>
            <field name="model_id" ref="model_ipai_approval_request"/>
            <field name="email_from">{{ (object.company_id.email or user.email_formatted) }}</field>
            <field name="email_to">{{ object.user_id.email }}</field>
            <field name="subject">Approved: {{ object.name }}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Hello {{ object.user_id.name }},
        <br/><br/>
        Your approval request has been <strong style="color: green;">approved</strong>:
        <br/><br/>
        <strong>Request:</strong> {{ object.name }}<br/>
        <strong>Type:</strong> {{ object.type_id.name }}<br/>
        <strong>Approved by:</strong> {{ object.final_approver_id.name }}<br/>
        <strong>Approved on:</strong> {{ object.date_approved }}<br/>
        <br/>
        <a href="/web#id={{ object.id }}&amp;model=ipai.approval.request&amp;view_type=form"
           style="background-color: #28a745; padding: 8px 16px; text-decoration: none; color: #fff; border-radius: 5px;">
            View Request
        </a>
        <br/><br/>
        Best regards,<br/>
        {{ object.company_id.name }}
    </p>
</div>
            </field>
            <field name="lang">{{ object.user_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <!-- Email Template: Approval Request Rejected -->
        <record id="mail_template_approval_request_rejected" model="mail.template">
            <field name="name">Approval Request: Rejected</field>
            <field name="model_id" ref="model_ipai_approval_request"/>
            <field name="email_from">{{ (object.company_id.email or user.email_formatted) }}</field>
            <field name="email_to">{{ object.user_id.email }}</field>
            <field name="subject">Rejected: {{ object.name }}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Hello {{ object.user_id.name }},
        <br/><br/>
        Your approval request has been <strong style="color: red;">rejected</strong>:
        <br/><br/>
        <strong>Request:</strong> {{ object.name }}<br/>
        <strong>Type:</strong> {{ object.type_id.name }}<br/>
        <strong>Rejected by:</strong> {{ object.final_approver_id.name }}<br/>
        <strong>Rejected on:</strong> {{ object.date_rejected }}<br/>
        {% if object.rejection_reason %}
        <strong>Reason:</strong> {{ object.rejection_reason }}<br/>
        {% endif %}
        <br/>
        <a href="/web#id={{ object.id }}&amp;model=ipai.approval.request&amp;view_type=form"
           style="background-color: #dc3545; padding: 8px 16px; text-decoration: none; color: #fff; border-radius: 5px;">
            View Request
        </a>
        <br/><br/>
        Best regards,<br/>
        {{ object.company_id.name }}
    </p>
</div>
            </field>
            <field name="lang">{{ object.user_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>
    </data>
</odoo>
