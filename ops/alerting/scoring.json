{
  "$schema": "./scoring.schema.json",
  "version": "1.0.0",
  "description": "Multi-signal scoring configuration for ops alerting",

  "window_minutes": 60,

  "weights": {
    "dlq_count": 0.45,
    "error_rate": 0.35,
    "mirror_stale_minutes": 0.20
  },

  "normalize": {
    "dlq_count": {
      "cap": 20,
      "description": "DLQ items. 20+ = max severity contribution"
    },
    "error_rate": {
      "cap": 0.15,
      "description": "Error rate as decimal. 0.15 = 15% errors"
    },
    "mirror_stale_minutes": {
      "cap": 120,
      "description": "Mirror staleness in minutes. 2 hours = max"
    }
  },

  "bands": {
    "warn": 20,
    "critical": 50
  },

  "hard_thresholds": {
    "dlq_nonzero": 1,
    "error_rate_critical": 0.10
  },

  "persistence": {
    "warn": {
      "n": 2,
      "m": 3,
      "description": "2 of last 3 windows must be warn or critical"
    },
    "critical": {
      "n": 1,
      "m": 2,
      "description": "1 of last 2 windows must be critical"
    }
  },

  "cooldowns": {
    "critical": 5,
    "warn": 15,
    "info": 60
  },

  "systems": {
    "erp.insightpulseai.com": {
      "environments": ["prod", "stage", "dev"],
      "components": ["odoo", "mirror", "auth", "db", "etl", "edge", "general"],
      "runbook_ref": "repo@HEAD:artifacts/erp.insightpulseai.com/runbooks/incident_response.md",
      "artifact_ref": "repo@HEAD:artifacts/erp.insightpulseai.com"
    }
  }
}
