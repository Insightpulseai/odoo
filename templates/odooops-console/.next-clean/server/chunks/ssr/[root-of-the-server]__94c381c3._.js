module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},73013,a=>{a.n(a.i(43871))},98160,a=>{a.n(a.i(71098))},59367,a=>{a.n(a.i(8188))},40422,a=>{a.n(a.i(98017))},89523,a=>{a.n(a.i(34764))},62771,a=>{a.n(a.i(74903))},16170,a=>{a.n(a.i(7247))},30068,a=>{a.n(a.i(48088))},69587,a=>{a.n(a.i(94908))},33765,a=>{"use strict";var b=a.i(99037),c=a.i(59089);async function d({params:a}){let{projectId:d}=await a,e=await (0,c.createClient)(),{data:f,error:g}=await e.from("ops.monitoring").select("*").eq("project_id",d);if(g)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"System Monitor"})}),(0,b.jsxs)("div",{className:"rounded-md bg-red-50 p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading monitoring data"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-red-700",children:g.message})]})]});let h=f&&f.length>0?f.some(a=>"critical"===a.status)?"critical":f.some(a=>"warning"===a.status)?"warning":"healthy":"unknown";f?.find(a=>a.branch_id);let i=f?.map(a=>({name:`Branch: ${a.branch_id.substring(0,8)}`,status:a.status,responseTime:a.request_rate?`${Math.round(1e3/a.request_rate)}ms`:"—",uptime:"—"}))||[],{data:j,error:k}=await e.from("ops.advisories").select("*").eq("project_id",d).order("created_at",{ascending:!1}).limit(5),l={healthy:{bg:"bg-green-100",text:"text-green-800",dot:"bg-green-500"},warning:{bg:"bg-yellow-100",text:"text-yellow-800",dot:"bg-yellow-500"},critical:{bg:"bg-red-100",text:"text-red-800",dot:"bg-red-500"},unknown:{bg:"bg-gray-100",text:"text-gray-800",dot:"bg-gray-500"}},m={warning:"text-yellow-600",critical:"text-red-600",info:"text-blue-600"},{data:n}=await e.rpc("ops.project_metrics",{p_project_id:d,p_metric:"cpu_pct",p_hours:1}),{data:o}=await e.rpc("ops.project_metrics",{p_project_id:d,p_metric:"mem_mb",p_hours:1}),{data:p}=await e.rpc("ops.project_metrics",{p_project_id:d,p_metric:"req_rate",p_hours:1}),q=n&&n.length>0?(n.reduce((a,b)=>a+Number(b.value),0)/n.length).toFixed(1):"0",r=o&&o.length>0?Math.round(o.reduce((a,b)=>a+Number(b.value),0)/o.length):0,s=p&&p.length>0?Math.round(p.reduce((a,b)=>a+Number(b.value),0)/p.length):0;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"System Monitor"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time health and performance monitoring"})]}),(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-12 h-12 ${l[h].bg} rounded-full flex items-center justify-center`,children:(0,b.jsx)("div",{className:`w-6 h-6 ${l[h].dot} rounded-full ${"healthy"===h?"animate-pulse":""}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"healthy"===h?"All Systems Operational":"warning"===h?"Systems Degraded":"critical"===h?"Systems Critical":"Status Unknown"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Last checked: ",new Date().toLocaleString()]})]})]})}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Service Status"})}),(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:i.length>0?i.map(a=>{let c=l[a.status];return(0,b.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-3 h-3 ${c.dot} rounded-full`}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.name})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Response:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.responseTime})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Uptime:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.uptime})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${c.bg} ${c.text}`,children:a.status})]})]},a.name)}):(0,b.jsx)("div",{className:"px-6 py-4 text-center text-sm text-gray-500",children:"No monitoring data available"})})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Incidents"})}),(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:j&&j.length>0?j.map(a=>(0,b.jsx)("div",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:a.title}),(0,b.jsx)("span",{className:`text-xs font-medium ${m[a.severity]}`,children:a.severity.toUpperCase()})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[(0,b.jsx)("span",{children:function(a){if(!a)return"Never";let b=Date.now()-new Date(a).getTime(),c=Math.floor(b/6e4),d=Math.floor(b/36e5),e=Math.floor(b/864e5);return e>0?`${e}d ago`:d>0?`${d}h ago`:c>0?`${c}m ago`:"Just now"}(a.created_at)}),(0,b.jsx)("span",{children:a.category})]}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:a.recommendation})]}),"resolved"===a.status&&(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ Resolved"}),"snoozed"===a.status&&(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"⏸ Snoozed"})]})},a.id)):(0,b.jsx)("div",{className:"px-6 py-4 text-center text-sm text-gray-500",children:"No recent incidents"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Avg CPU Usage"}),(0,b.jsx)("div",{className:"flex items-end justify-between",children:(0,b.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[q,"%"]})})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Avg Memory"}),(0,b.jsx)("div",{className:"flex items-end justify-between",children:(0,b.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[r," MB"]})})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Requests/Min"}),(0,b.jsx)("div",{className:"flex items-end justify-between",children:(0,b.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s})})]})]})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__94c381c3._.js.map