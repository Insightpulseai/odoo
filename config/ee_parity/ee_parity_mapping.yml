# EE Parity Mapping (SSOT)
# Maps each EE feature to CE core / OCA / external service / (last resort) custom
# Status progression: unmapped -> planned -> installed -> verified

meta:
  odoo_version_target: "19.0"
  enforcement: "block_custom_until_covered"
  last_updated: "2026-01-26"
  release_notes_source: "https://www.odoo.com/documentation/19.0/releasenotes.html"
  description: |
    All features must reach 'verified' status before ipai_enterprise_bridge
    changes are allowed. This is enforced by CI.

    Updated for Odoo 19 Release Notes (September 2025) parity analysis.

mapping:
  # ---- Accounting ----
  - feature_id: accounting_asset_management
    strategy: "oca"
    oca_modules:
      - account_asset_management
    repo_refs:
      - "OCA/account-financial-tools"
    status: "planned"
    owner: "platform"
    notes: "OCA account_asset_management provides full asset lifecycle"

  - feature_id: accounting_budget
    strategy: "oca"
    oca_modules:
      - mis_builder
      - mis_builder_budget
    repo_refs:
      - "OCA/mis-builder"
    status: "planned"
    owner: "platform"
    notes: "MIS Builder provides flexible budgeting and variance analysis"

  - feature_id: accounting_consolidation
    strategy: "oca"
    oca_modules:
      - account_consolidation
    repo_refs:
      - "OCA/account-consolidation"
    status: "planned"
    owner: "platform"
    notes: "OCA consolidation module for multi-company"

  - feature_id: accounting_analytic_plans
    strategy: "oca"
    oca_modules:
      - analytic_tag_dimension
    repo_refs:
      - "OCA/account-analytic"
    status: "planned"
    owner: "platform"
    notes: "Analytic dimensions via tags"

  # ---- Documents/Sign ----
  - feature_id: sign_electronic_signature
    strategy: "external"
    external_service: "DocuSign/SignRequest/Yousign"
    oca_modules: []
    status: "planned"
    owner: "platform"
    notes: "Use third-party signature service via API integration"

  - feature_id: documents_management
    strategy: "oca"
    oca_modules:
      - dms
      - dms_field
    repo_refs:
      - "OCA/dms"
    status: "planned"
    owner: "platform"
    notes: "OCA DMS provides document workspace"

  # ---- HR ----
  - feature_id: hr_appraisal
    strategy: "oca"
    oca_modules:
      - hr_appraisal_survey
    repo_refs:
      - "OCA/hr"
    status: "planned"
    owner: "platform"
    notes: "Survey-based appraisals via OCA"

  - feature_id: hr_payroll
    strategy: "oca"
    oca_modules:
      - payroll
      - payroll_account
    repo_refs:
      - "OCA/payroll"
    status: "planned"
    owner: "platform"
    notes: "OCA payroll provides base salary computation"

  # ---- Planning/Gantt ----
  - feature_id: planning_gantt
    strategy: "oca"
    oca_modules:
      - web_timeline
      - project_timeline
    repo_refs:
      - "OCA/web"
      - "OCA/project"
    status: "planned"
    owner: "platform"
    notes: "Timeline view as Gantt alternative"

  - feature_id: project_forecast
    strategy: "oca"
    oca_modules:
      - project_forecast_line
    repo_refs:
      - "OCA/project"
    status: "planned"
    owner: "platform"
    notes: "Resource planning via forecast lines"

  # ---- Quality ----
  - feature_id: quality_control
    strategy: "oca"
    oca_modules:
      - quality_control_oca
    repo_refs:
      - "OCA/manufacture"
    status: "planned"
    owner: "platform"
    notes: "OCA quality control module"

  # ---- Marketing ----
  - feature_id: marketing_automation
    strategy: "external"
    external_service: "n8n/Mautic"
    oca_modules: []
    status: "planned"
    owner: "platform"
    notes: "Use n8n workflows or Mautic for marketing automation"

  # ---- Studio ----
  - feature_id: studio_customization
    strategy: "ce"
    ce_modules:
      - base_automation
      - base_action_rule
    oca_modules:
      - web_widget_many2many_tags_multi_selection
    status: "planned"
    owner: "platform"
    notes: "Automated actions + OCA web widgets provide basic customization"

  # ---- IAP Services ----
  - feature_id: iap_sms
    strategy: "external"
    external_service: "Twilio/MessageBird"
    oca_modules:
      - sms_no_iap
    repo_refs:
      - "OCA/social"
    status: "planned"
    owner: "platform"
    notes: "External SMS gateway, no Odoo IAP"

  - feature_id: iap_ocr
    strategy: "external"
    external_service: "OCR.space/Google Vision/AWS Textract"
    oca_modules: []
    status: "planned"
    owner: "platform"
    notes: "External OCR service via API integration"

  - feature_id: iap_partner_autocomplete
    strategy: "external"
    external_service: "Clearbit/Apollo/custom"
    oca_modules: []
    status: "planned"
    owner: "platform"
    notes: "External company data enrichment API"

  # ==== Odoo 19 New Features (2026-01-26) ====

  # ---- AI Platform (CRITICAL - New in Odoo 19) ----
  - feature_id: ai_agents
    strategy: "ipai"
    ipai_modules:
      - ipai_ai_agent_builder
    status: "planned"
    owner: "ai-team"
    priority: "P0"
    notes: "AI agents with system prompts, topics, tools - Odoo 19 flagship feature"

  - feature_id: ai_rag_sources
    strategy: "ipai"
    ipai_modules:
      - ipai_ai_rag
    status: "planned"
    owner: "ai-team"
    priority: "P0"
    notes: "RAG pipeline: files, URLs, knowledge docs, model fields"

  - feature_id: ai_tools
    strategy: "ipai"
    ipai_modules:
      - ipai_ai_tools
    status: "planned"
    owner: "ai-team"
    priority: "P0"
    notes: "Tool registry with audited execution"

  - feature_id: ai_chatgpt5_gemini
    strategy: "ipai"
    ipai_modules:
      - ipai_ai_agent_builder
    status: "planned"
    owner: "ai-team"
    priority: "P0"
    notes: "ChatGPT 5.0 and Gemini provider support"

  - feature_id: ai_fields
    strategy: "ipai"
    ipai_modules:
      - ipai_ai_fields
    status: "planned"
    owner: "ai-team"
    priority: "P1"
    notes: "AI-powered field population"

  - feature_id: ai_server_actions
    strategy: "ce"
    ce_modules:
      - base_automation
    ipai_modules:
      - ipai_ai_automations
    status: "planned"
    owner: "ai-team"
    priority: "P1"
    notes: "AI in automated actions"

  - feature_id: ai_livechat
    strategy: "ipai"
    ipai_modules:
      - ipai_ai_livechat
    status: "planned"
    owner: "ai-team"
    priority: "P2"
    notes: "AI agent connected to live chat"

  - feature_id: ai_voice_transcript
    strategy: "external"
    external_service: "Whisper API"
    status: "planned"
    owner: "ai-team"
    priority: "P3"
    notes: "Voice transcription via external service"

  # ---- ESG (New App in Odoo 19) ----
  - feature_id: esg_carbon_analytics
    strategy: "ipai"
    ipai_modules:
      - ipai_esg
    status: "planned"
    owner: "compliance"
    priority: "P2"
    notes: "Carbon footprint analytics by scope and activity"

  - feature_id: esg_emission_factors
    strategy: "ipai"
    ipai_modules:
      - ipai_esg
    status: "planned"
    owner: "compliance"
    priority: "P2"
    notes: "IPCC database integration for emission factors"

  - feature_id: esg_social_metrics
    strategy: "ipai"
    ipai_modules:
      - ipai_esg_social
    status: "planned"
    owner: "compliance"
    priority: "P2"
    notes: "Gender parity and pay gap tracking"

  # ---- Equity (New App in Odoo 19) ----
  - feature_id: equity_share_tracking
    strategy: "ipai"
    ipai_modules:
      - ipai_equity
    status: "planned"
    owner: "finance"
    priority: "P3"
    notes: "Share/option transactions and shareholder management"

  # ---- WhatsApp Integration (Odoo 19) ----
  - feature_id: whatsapp_integration
    strategy: "ipai"
    ipai_modules:
      - ipai_whatsapp_connector
    status: "planned"
    owner: "integrations"
    priority: "P1"
    notes: "WhatsApp for follow-ups, calendar, shipping, sign"

  # ---- Tax Return (Odoo 19) ----
  - feature_id: tax_return_workflow
    strategy: "ipai"
    ipai_modules:
      - ipai_finance_tax_return
    status: "planned"
    owner: "finance"
    priority: "P0"
    notes: "New tax return workflow with validation"

  # ---- Helpdesk Enhancements (Odoo 19) ----
  - feature_id: helpdesk_rotting_tickets
    strategy: "ipai"
    ipai_modules:
      - ipai_helpdesk
    status: "planned"
    owner: "services"
    priority: "P1"
    notes: "Inactive ticket identification in Kanban"

  - feature_id: helpdesk_gift_card_refund
    strategy: "ipai"
    ipai_modules:
      - ipai_helpdesk_refund
    status: "planned"
    owner: "services"
    priority: "P2"
    notes: "Gift card/voucher reimbursements"

  # ---- Project Templates (Odoo 19) ----
  - feature_id: project_templates
    strategy: "ipai"
    ipai_modules:
      - ipai_project_templates
    status: "planned"
    owner: "project"
    priority: "P1"
    notes: "Project and task templates with roles"

  # ---- Planning Enhancements (Odoo 19) ----
  - feature_id: planning_attendance_analysis
    strategy: "ipai"
    ipai_modules:
      - ipai_planning_attendance
    status: "planned"
    owner: "hr"
    priority: "P1"
    notes: "Compare planned vs attended hours"

  # ---- Payroll Enhancements (Odoo 19) ----
  - feature_id: payroll_pay_runs
    strategy: "oca"
    oca_modules:
      - payroll
    ipai_modules:
      - ipai_hr_payroll_ph
    status: "planned"
    owner: "hr"
    priority: "P0"
    notes: "Pay runs with guided steps (batch renamed)"

  - feature_id: payroll_multiple_bank_accounts
    strategy: "ipai"
    ipai_modules:
      - ipai_hr_payroll_ph
    status: "planned"
    owner: "hr"
    priority: "P1"
    notes: "Split salary across multiple accounts"

  # ---- Documents AI (Odoo 19) ----
  - feature_id: documents_ai_management
    strategy: "ipai"
    ipai_modules:
      - ipai_documents_ai
    status: "planned"
    owner: "documents"
    priority: "P2"
    notes: "AI-driven document classification and actions"

  # ---- Sign Enhancements (Odoo 19) ----
  - feature_id: sign_document_envelopes
    strategy: "ipai"
    ipai_modules:
      - ipai_sign
    status: "planned"
    owner: "documents"
    priority: "P2"
    notes: "Multiple documents in single sign request"

  # ---- Philippines Localizations (Odoo 19) ----
  - feature_id: bir_2550q_revamp
    strategy: "ipai"
    ipai_modules:
      - ipai_bir_vat
    status: "planned"
    owner: "localization"
    priority: "P0"
    notes: "Updated 2550Q per 2025/2026 BIR format"

  - feature_id: bir_dat_export
    strategy: "ipai"
    ipai_modules:
      - ipai_bir_alphalist
    status: "planned"
    owner: "localization"
    priority: "P0"
    notes: "Direct .DAT export for Alphalist/ReLiEf"
