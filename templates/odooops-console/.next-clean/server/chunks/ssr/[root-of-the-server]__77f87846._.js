module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},73013,a=>{a.n(a.i(43871))},98160,a=>{a.n(a.i(71098))},59367,a=>{a.n(a.i(8188))},40422,a=>{a.n(a.i(98017))},89523,a=>{a.n(a.i(34764))},62771,a=>{a.n(a.i(74903))},16170,a=>{a.n(a.i(7247))},30068,a=>{a.n(a.i(48088))},69587,a=>{a.n(a.i(94908))},21833,a=>{"use strict";var b=a.i(99037),c=a.i(59089),d=a.i(22703);async function e({params:a}){let{projectId:d}=await a,e=await (0,c.createClient)(),{data:g,error:h}=await e.rpc("ops.project_branches",{p_project_id:d});if(h)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Builds"})}),(0,b.jsxs)("div",{className:"rounded-md bg-red-50 p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading builds"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-red-700",children:h.message})]})]});if(!g||0===g.length)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Builds"})}),(0,b.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-12 text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No branches yet"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Create a branch to start building."})]})]});let i=g.map(a=>e.rpc("ops.branch_builds",{p_branch_id:a.id}).then(b=>({branchId:a.id,branchName:a.name,builds:b.data||[]}))),j=await Promise.all(i),k={};return j.forEach(a=>{k[a.branchName]=a.builds}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Builds"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Build history grid (rows = branches, cells = builds)"})]}),(0,b.jsx)("div",{className:"space-y-4",children:g.map(a=>(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,b.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,b.jsxs)("h3",{className:"font-semibold text-sm",children:[a.name,(0,b.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",a.stage,")"]})]})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)("div",{className:"flex gap-3 overflow-x-auto",children:(k[a.name]||[]).length>0?(k[a.name]||[]).map(c=>(0,b.jsx)(f,{build:{id:c.id,branchName:a.name,commitSha:c.commit_sha?.substring(0,7)||"unknown",status:c.status,createdAt:function(a){if(!a)return"Never";let b=Date.now()-new Date(a).getTime(),c=Math.floor(b/6e4),d=Math.floor(b/36e5),e=Math.floor(b/864e5);return e>0?`${e}d ago`:d>0?`${d}h ago`:c>0?`${c}m ago`:"Just now"}(c.created_at),duration:function(a){if(!a)return"—";let b=Math.floor(a/60);return`${b}m ${a%60}s`}(c.duration_seconds)},projectId:d},c.id)):(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No builds for this branch"})})})]},a.id))})]})}function f({build:a,projectId:c}){return(0,b.jsx)(d.default,{href:`/app/projects/${c}/builds/${a.id}/logs`,className:`flex-shrink-0 w-32 border-2 rounded-lg p-3 hover:shadow-md transition ${{success:"border-green-500 bg-green-50",running:"border-yellow-500 bg-yellow-50 animate-pulse",building:"border-yellow-500 bg-yellow-50 animate-pulse",failed:"border-red-500 bg-red-50",queued:"border-gray-300 bg-gray-50",cancelled:"border-gray-400 bg-gray-100"}[a.status]||"border-gray-300 bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-lg font-bold",children:{success:"✓",running:"⟳",building:"⟳",failed:"✗",queued:"⏳",cancelled:"⊘"}[a.status]||"?"}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:a.createdAt})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-xs font-mono truncate",children:a.commitSha}),a.duration&&"—"!==a.duration&&(0,b.jsx)("div",{className:"text-xs text-gray-600",children:a.duration}),"building"===a.status&&(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"In progress..."})]})]})})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__77f87846._.js.map