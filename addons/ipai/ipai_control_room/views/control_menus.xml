<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ==================== Root Menu ==================== -->

    <menuitem id="menu_control_room_root"
              name="Control Room"
              web_icon="ipai_control_room,static/description/icon.png"
              sequence="5"/>

    <!-- ==================== Overview Menu ==================== -->

    <!-- Overview Dashboard (placeholder - would be a client action) -->
    <record id="action_control_room_overview" model="ir.actions.act_window">
        <field name="name">Overview</field>
        <field name="res_model">control.run</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('started_at', '>=', (context_today() - datetime.timedelta(days=7)).strftime('%Y-%m-%d'))]</field>
        <field name="context">{'search_default_running': 1, 'search_default_failed': 1}</field>
    </record>

    <menuitem id="menu_control_room_overview"
              name="Overview"
              parent="menu_control_room_root"
              action="action_control_room_overview"
              sequence="1"/>

    <!-- ==================== Pipelines Menu ==================== -->

    <menuitem id="menu_control_room_pipelines"
              name="Pipelines"
              parent="menu_control_room_root"
              sequence="10"/>

    <menuitem id="menu_control_pipeline_list"
              name="All Pipelines"
              parent="menu_control_room_pipelines"
              action="action_control_pipeline"
              sequence="1"/>

    <menuitem id="menu_control_run_list"
              name="Pipeline Runs"
              parent="menu_control_room_pipelines"
              action="action_control_run"
              sequence="2"/>

    <menuitem id="menu_control_schedule_list"
              name="Schedules"
              parent="menu_control_room_pipelines"
              action="action_control_schedule"
              sequence="3"/>

    <menuitem id="menu_control_artifact_list"
              name="Artifacts"
              parent="menu_control_room_pipelines"
              action="action_control_artifact"
              sequence="4"/>

    <menuitem id="menu_control_env_list"
              name="Environments"
              parent="menu_control_room_pipelines"
              action="action_control_env"
              sequence="5"/>

    <!-- ==================== Data Quality Menu ==================== -->

    <menuitem id="menu_control_room_dq"
              name="Data Quality"
              parent="menu_control_room_root"
              sequence="20"/>

    <menuitem id="menu_control_dq_rule_list"
              name="Rules"
              parent="menu_control_room_dq"
              action="action_control_dq_rule"
              sequence="1"/>

    <menuitem id="menu_control_dq_issue_list"
              name="Issues"
              parent="menu_control_room_dq"
              action="action_control_dq_issue"
              sequence="2"/>

    <menuitem id="menu_control_dq_check_run_list"
              name="Check History"
              parent="menu_control_room_dq"
              action="action_control_dq_check_run"
              sequence="3"/>

    <!-- ==================== Advisor Menu ==================== -->

    <menuitem id="menu_control_room_advisor"
              name="Advisor"
              parent="menu_control_room_root"
              sequence="30"/>

    <menuitem id="menu_control_advice_list"
              name="Recommendations"
              parent="menu_control_room_advisor"
              action="action_control_advice"
              sequence="1"/>

    <menuitem id="menu_control_playbook_list"
              name="Playbooks"
              parent="menu_control_room_advisor"
              action="action_control_playbook"
              sequence="2"/>

    <menuitem id="menu_control_action_list"
              name="Action History"
              parent="menu_control_room_advisor"
              action="action_control_action"
              sequence="3"/>

    <!-- ==================== Settings Menu ==================== -->

    <menuitem id="menu_control_room_settings"
              name="Settings"
              parent="menu_control_room_root"
              sequence="100"
              groups="base.group_system"/>

    <menuitem id="menu_control_connector_list"
              name="Connectors"
              parent="menu_control_room_settings"
              action="action_control_connector"
              sequence="1"/>

    <menuitem id="menu_control_notification_channel_list"
              name="Notifications"
              parent="menu_control_room_settings"
              action="action_control_notification_channel"
              sequence="2"/>

    <menuitem id="menu_control_feature_flag_list"
              name="Feature Flags"
              parent="menu_control_room_settings"
              action="action_control_feature_flag"
              sequence="3"/>

    <menuitem id="menu_control_secret_ref_list"
              name="Secret References"
              parent="menu_control_room_settings"
              action="action_control_secret_ref"
              sequence="4"/>
</odoo>
