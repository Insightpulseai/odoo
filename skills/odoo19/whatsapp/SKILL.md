---
name: whatsapp
description: WhatsApp Business integration for sending messages, templates, and customer communication via Meta API
metadata:
  author: Claude Agent
  version: "19.0"
  source: "Odoo 19.0 Official Documentation"
  extracted: "2026-02-18"
---

# whatsapp -- Odoo 19.0 Skill Reference

## Overview

The Odoo WhatsApp app integrates a WhatsApp Business Account (WABA) with Odoo via the Meta Cloud API. It enables sending/receiving WhatsApp messages directly from the database, using pre-approved templates with dynamic placeholders for quotations, invoices, event tickets, and more. Conversations appear in Odoo Discuss. This is an Enterprise-only application.

## Key Concepts

- **WhatsApp Business Account (WABA)**: The Meta business account connected to Odoo for messaging.
- **Meta Developer App**: A "Business" type app created in Meta's developer console with the WhatsApp product added.
- **Callback URL / Webhook Verify Token**: Generated by Odoo after configuring the WABA; used to set up webhooks in Meta for receiving messages.
- **Webhooks**: Meta sends message events to Odoo via configured webhook fields (account_update, messages, message_template_status_update, message_template_quality_update, template_category_update).
- **Templates**: Pre-approved message templates with Header, Body, Footer, Buttons, and Variables. Must be approved by Meta before use.
- **Placeholders / Variables**: Dynamic content markers `{{1}}`, `{{2}}`, etc. in the template body, mapped to Odoo model fields.
- **Template Categories**: Marketing, Utility, Authentication. Incorrect category causes Meta rejection.
- **Buttons**: Quick Reply, Visit Website (static/dynamic/tracked URLs), Call Number.
- **Permanent Token**: System User access token (replaces temporary token) with `business_management`, `whatsapp_business_messaging`, `whatsapp_business_management`, `whatsapp_business_manage_events` permissions.
- **Company-Initiated Flow**: Company sends a template to customers; if customer replies within 15 days, a Discuss chat opens.
- **Customer-Initiated Flow**: Customer messages the public WhatsApp number; Odoo opens a group chat with all channel operators.

## Core Workflows

1. **Configure WhatsApp in Meta**
   1. Create a Meta Business Account at business.facebook.com.
   2. Create a Meta Developer Account and app (Business type, named "Odoo").
   3. Add WhatsApp product to the app.
   4. Send test message via API Setup to verify.

2. **Configure WhatsApp in Odoo**
   1. Go to WhatsApp > Configuration > WhatsApp Business Accounts, click New.
   2. Copy Phone Number ID, Access Token, App ID, Account ID, App Secret from Meta console.
   3. Click Test Connection.
   4. Copy Callback URL and Webhook Verify Token to Meta webhook configuration.
   5. Subscribe to webhook fields: account_update, messages, message_template_status_update, message_template_quality_update, template_category_update.

3. **Create a Permanent Token**
   1. In Meta Business Suite > Business Settings > System Users, create or select a system user.
   2. Add Assets: select the Odoo app with Full Control.
   3. Generate New Token with permissions: business_management, whatsapp_business_messaging, whatsapp_business_management, whatsapp_business_manage_events.
   4. Copy token and update Access Token in Odoo WABA configuration.

4. **Create and Approve a Template**
   1. Go to WhatsApp > Templates, click New.
   2. Set Name, Language, Account, Applies to (model), Phone Field, Category.
   3. Configure Body with placeholders, Buttons, and Variables tabs.
   4. Click Submit for Approval.
   5. Wait for Meta approval email.
   6. Sync templates: WhatsApp > Configuration > WhatsApp Business Accounts > Sync Templates.

5. **Send a WhatsApp Message from a Record**
   1. Open a record (e.g., Sales Order).
   2. Click the WhatsApp button above the chatter.
   3. Select an approved template.
   4. Review auto-populated variables.
   5. Send.

6. **Go Live**
   1. In Meta Developer Dashboard, toggle App Mode from Development to Live.
   2. Ensure a Privacy Policy URL is set in App Settings > Basic.

## Technical Reference

- **Key Models**: `whatsapp.account`, `whatsapp.template`, `whatsapp.template.variable`, `whatsapp.template.button`, `whatsapp.message`
- **WABA Config Fields**: `phone_number_id`, `access_token`, `app_id`, `account_id`, `app_secret`, `callback_url`, `webhook_verify_token`
- **Template Fields**: `name`, `language`, `account_id`, `model_id` (Applies to), `phone_field`, `category` (marketing/utility/authentication), `header_type` (text/image/video/document/location), `body`, `button_ids`, `variable_ids`, `status` (draft/pending/approved/rejected)
- **Variable Fields**: `name`, `sample_value`, `type` (Field of Model / Portal link), `field_name`
- **Notification Config**: WhatsApp > Configuration > WhatsApp Business Accounts > Control section > Notify Users.
- **Message Diagnostics**: WhatsApp > Messages. Enable Failure Type and Failure Reason columns.

## API / RPC Patterns

The integration uses the Meta WhatsApp Cloud API. Odoo communicates via:
- REST API calls to `graph.facebook.com` for sending messages and syncing templates.
- Webhook callbacks from Meta to the Odoo Callback URL for receiving messages and template status updates.

## Version Notes (19.0)

- Multi-Template feature allows sending templates to multiple contacts.
- Template buttons support tracked URLs for analytics.
- Customer-initiated conversations open group chats with all designated operators.

## Common Pitfalls

- **Temporary token expiry**: Error 190 ("Session has expired"). Replace with a permanent system user token.
- **Employee token error**: Error 100 ("Unsupported get request"). Use an Admin system user, not an Employee.
- **Duplicate validation error**: Multiple templates with the same name in Meta and Odoo. Rename the duplicate in Odoo and re-sync.
- **Incorrect template category**: Causes Meta rejection. Marketing = promotions; Utility = transactional; Authentication = OTPs.
- **App not Live**: If Meta app is in Development mode, only test numbers can be contacted. Toggle to Live for production.
