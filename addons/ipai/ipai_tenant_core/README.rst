==================
IPAI Tenant Core
==================

..
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:...
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-jgtolentino%2Fodoo--ce-lightgray.png?logo=github
    :target: https://github.com/jgtolentino/odoo-ce/tree/18.0/addons/ipai/ipai_tenant_core
    :alt: jgtolentino/odoo-ce

|badge1| |badge2| |badge3|

Multi-tenant platform core for InsightPulse AI, providing tenant isolation and metadata management for shared Odoo + Supabase + Superset infrastructure.

**Table of contents**

.. contents::
   :local:

Overview
========

This module implements **tenant-aware architecture** where:

* TBWA = tenant/client (not special codebase fork)
* Platform = shared infrastructure (Odoo CE + Supabase + Superset)
* Isolation = database-level (one Odoo DB per tenant + Supabase schema isolation)

Features
--------

* **Tenant Metadata Management**: Track tenant configuration (code, db_name, supabase_schema)
* **Automated Provisioning**: One-command tenant setup via ``provision_tenant.sh``
* **Supabase Integration**: PostgreSQL schema isolation (public, tbwa, scout)
* **Superset Integration**: Tenant-specific dashboard workspaces
* **Cross-Repo Coordination**: Auto-trigger Superset rebuild on schema changes

Architecture
============

Tenant Isolation Model
-----------------------

::

    Odoo Host (Droplet/App Platform)
    ├── Odoo Container (ghcr.io/jgtolentino/odoo-ce:18)
    │   └── Serves multiple databases
    ├── PostgreSQL (Supabase: spdtwktxdalcfigzeqrz)
    │   ├── odoo_platform (internal operations)
    │   ├── odoo_tbwa (TBWA tenant)
    │   └── odoo_<next> (future tenants)
    └── Supabase Schemas
        ├── public (platform metadata)
        ├── tbwa (TBWA client data)
        ├── scout (shared retail intelligence)
        └── <next> (future tenant schemas)

Configuration
=============

After installing the module:

1. Navigate to **Platform > Tenants**
2. Review seed tenants:

   * **platform** → Internal operations (odoo_platform, public schema)
   * **tbwa** → TBWA Philippines (odoo_tbwa, tbwa schema)
   * **scout** → Scout Retail Intelligence (odoo_platform, scout schema)

3. Create additional tenants as needed

Usage
=====

Provision New Tenant
--------------------

**Via Command Line** (recommended):

.. code-block:: bash

    cd /path/to/odoo-ce
    export ODOO_ADMIN_PASSWORD='secure_password'
    export POSTGRES_URL='postgres://postgres.spdtwktxdalcfigzeqrz:...'
    make provision-tenant CODE=tbwa

**Via Odoo UI**:

1. Create tenant record: **Platform > Tenants > Create**
2. Set required fields:

   * Code: ``tbwa`` (lowercase alphanumeric)
   * DB Name: ``odoo_tbwa``
   * Supabase Schema: ``tbwa``
   * Primary Domain: ``tbwa.erp.insightpulseai.net``

3. Click **Provision Supabase Schema** button
4. Run provisioning script to complete setup

Access Tenant Data
------------------

**In Odoo**:

* Access via domain: ``https://tbwa.erp.insightpulseai.net``
* Or filter: ``https://erp.insightpulseai.net?db=odoo_tbwa``

**In Superset**:

1. Click **Open Superset** button on tenant record
2. Access tenant-specific dashboards in workspace folder

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/jgtolentino/odoo-ce/issues>`_.
In case of trouble, please check there if your issue has already been reported.

Credits
=======

Authors
-------

* InsightPulse AI

Contributors
------------

* Jake Tolentino <jake.tolentino@tbwa.com.ph>

  * Module design and implementation
  * Tenant provisioning automation
  * Cross-repo CI integration

* Claude Sonnet 4.5 (AI Assistant)

  * Architecture design
  * Documentation

Maintainers
-----------

This module is maintained by InsightPulse AI.

.. image:: https://insightpulseai.net/logo.png
   :alt: InsightPulse AI
   :target: https://insightpulseai.net

InsightPulse AI provides **multi-tenant ERP and BI platform solutions** for advertising agencies and retail intelligence.

Current maintainer:

* Jake Tolentino (Finance SSC Manager / Odoo Developer)
