# Spec Kit CLI — pinned version + refresh policy
# Policy: docs/policies/spec-kit.md
# Runbook: docs/runbooks/spec-kit-refresh.md
# CI gate: .github/workflows/spec-kit-drift.yml

spec_kit:
  cli:
    name: specify
    version: "1.3.0"        # latest as of 2026-03-01; bump via chore/spec-kit-refresh PR
    install: "npm install -g specify@1.3.0"
    check_cmd: "specify check"

  # Paths owned by `specify init --here --force`
  # Any edit to these files outside a chore/spec-kit-refresh PR will fail CI drift gate
  template_paths:
    - .specify/templates/
    - .specify/scripts/
    - ".claude/commands/speckit.*.md"

  # Paths that are NEVER regenerated by the CLI (always authored by contributors)
  ssot_paths:
    - "spec/**"             # Spec bundles are SSOT — never touched by CLI refresh

  upgrade_policy:
    command: "specify init --here --force --ignore-agent-tools"
    cadence: monthly-or-on-demand
    pr_label: chore/spec-kit-refresh
    pr_branch_pattern: "chore/spec-kit-refresh-*"
    ci_gate: .github/workflows/spec-kit-drift.yml
