<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Product Template Form View Extension for Scout Fields -->
    <record id="view_product_template_form_scout" model="ir.ui.view">
        <field name="name">product.template.form.scout</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="priority">50</field>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='sales']" position="after">
                <page string="Scout Analytics" name="scout_analytics">
                    <group>
                        <group string="Scout Classification">
                            <field name="scout_category"/>
                            <field name="scout_subcategory"/>
                            <field name="scout_brand"/>
                            <field name="scout_manufacturer"/>
                        </group>
                        <group string="Scout Flags">
                            <field name="scout_is_competitor"/>
                            <field name="scout_is_focus_sku"/>
                        </group>
                    </group>
                    <group>
                        <group string="Product Details">
                            <field name="scout_pack_size"/>
                            <field name="scout_srp"/>
                            <field name="scout_min_order_qty"/>
                            <field name="scout_shelf_life_days"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Product Template List View Extension -->
    <record id="view_product_template_tree_scout" model="ir.ui.view">
        <field name="name">product.template.tree.scout</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_tree_view"/>
        <field name="priority">50</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='categ_id']" position="after">
                <field name="scout_category" optional="hide"/>
                <field name="scout_brand" optional="hide"/>
                <field name="scout_is_focus_sku" optional="hide"/>
                <field name="scout_is_competitor" optional="hide"/>
            </xpath>
        </field>
    </record>

    <!-- Product Template Search View Extension -->
    <record id="view_product_template_search_scout" model="ir.ui.view">
        <field name="name">product.template.search.scout</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_search_view"/>
        <field name="priority">50</field>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='consumable']" position="after">
                <separator/>
                <filter string="Focus SKUs" name="focus_skus"
                        domain="[('scout_is_focus_sku', '=', True)]"/>
                <filter string="Competitor Brands" name="competitor"
                        domain="[('scout_is_competitor', '=', True)]"/>
                <separator/>
                <filter string="Dairy" name="dairy"
                        domain="[('scout_category', '=', 'dairy')]"/>
                <filter string="Snacks" name="snacks"
                        domain="[('scout_category', '=', 'snacks')]"/>
                <filter string="Beverage" name="beverage"
                        domain="[('scout_category', '=', 'beverage')]"/>
                <filter string="Personal Care" name="personal_care"
                        domain="[('scout_category', '=', 'personal_care')]"/>
            </xpath>
            <xpath expr="//group" position="inside">
                <filter string="Scout Category" name="group_scout_category"
                        context="{'group_by': 'scout_category'}"/>
                <filter string="Scout Brand" name="group_scout_brand"
                        context="{'group_by': 'scout_brand'}"/>
            </xpath>
        </field>
    </record>

    <!-- Scout Products Action -->
    <record id="action_scout_products" model="ir.actions.act_window">
        <field name="name">Scout Products</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="domain">[('scout_category', '!=', False)]</field>
        <field name="context">{'search_default_focus_skus': 0}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first Scout product
            </p>
            <p>
                Track FMCG products with Scout category, brand, and analytics fields.
            </p>
        </field>
    </record>

    <!-- Menu Item for Scout Products -->
    <menuitem id="menu_scout_products"
              name="Scout Products"
              parent="menu_scout_retail_root"
              action="action_scout_products"
              sequence="20"/>
</odoo>
