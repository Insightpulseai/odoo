[options]
; ============================================================
; TBWA\SMP â€” Production Odoo Config (Canonical)
; - App host: odoo-erp-prod (178.128.112.214)
; - DB: DO Managed Postgres (odoo-db-sgp1, PG16)
; - Single allowed Odoo DB: odoo (enforced by dbfilter)
; Secrets MUST be provided via env / secret store; never commit.
; ============================================================

; --- reverse proxy / routing ---
proxy_mode = True

; --- database (managed postgres) ---
; Use envs / deployment templating to fill these values.
db_host = ${ODOO_DB_HOST}
db_port = ${ODOO_DB_PORT}
db_user = ${ODOO_DB_USER}
db_password = ${ODOO_DB_PASSWORD}

; Force ONLY the canonical database
dbfilter = ^odoo$

; --- core ports ---
http_port = 8069
; Enable only if you actually route longpolling separately
; longpolling_port = 8072

; --- performance baseline (8GB droplet) ---
; Conservative default. Increase only after measuring.
workers = 5

; Soft/Hard memory limits (bytes). Keep conservative to avoid OOM kills.
limit_memory_soft = 2147483648
limit_memory_hard = 2684354560

; Request time caps (seconds)
limit_time_cpu = 60
limit_time_real = 120

; --- logging ---
log_level = info
; log_handler = :INFO
; logfile = /var/log/odoo/odoo-server.log

; --- misc safety ---
max_cron_threads = 2
