{
  "schema_version": "1.2.0",
  "seed_id": "ipai_finance_ppm_closing_bir_seed_v1_2",
  "timezone": "Asia/Manila",
  "calendar": {
    "business_days": ["MO", "TU", "WE", "TH", "FR"],
    "weekend_days": ["SA", "SU"],
    "holiday_policy": "manual_or_external_calendar",
    "date_adjustment": {
      "if_non_business_day": "move_to_previous_business_day"
    }
  },

  "directory": {
    "identifier": "employee_code",
    "codes": ["CKVC", "RIM", "BOM", "JPAL", "JAP", "LAS", "JLI", "RMQB", "JRMO", "JOL"],
    "role_hints": [
      { "employee_code": "BOM", "role": "Finance Supervisor" },
      { "employee_code": "RIM", "role": "Senior Finance Manager" },
      { "employee_code": "CKVC", "role": "Finance Director" }
    ]
  },

  "odoo_mapping": {
    "project_model": "project.project",
    "task_model": "project.task",
    "stages": ["Backlog", "In Progress", "For Review", "For Sign-off", "Done", "Blocked"],
    "task_identity_fields": ["x_cycle_key", "x_task_template_code", "date_deadline"],
    "assignment_resolution": {
      "match_user_on": ["x_employee_code"],
      "fallback": "leave_unassigned"
    }
  },

  "cycles": [
    {
      "cycle_code": "MONTH_END_CLOSE",
      "name": "Month-End Closing",
      "description": "PPM-oriented month-end close with staged approvals and audit trail.",
      "recurrence": {
        "type": "rrule",
        "rrule": "FREQ=MONTHLY;BYMONTHDAY=1",
        "instance_window": {
          "start_offset_days": 23,
          "end_offset_days": 33,
          "note": "Generates tasks in a closing window (e.g., Oct 24–Nov 3 pattern)."
        }
      },
      "phases": [
        {
          "phase_code": "PHASE_I_INITIAL_COMPLIANCE",
          "name": "Initial & Compliance",
          "workstreams": [
            {
              "workstream_code": "WS_PAYROLL_TAX_PROVISION",
              "name": "Payroll Processing & Tax Provision",
              "task_templates": [
                {
                  "task_template_code": "T_PAYROLL_PROCESSING",
                  "name": "Process and record Payroll, Final Pay, SL Conversions, early retirement accrual",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RIM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_PAYROLL_PROCESSING"
                },
                {
                  "task_template_code": "T_TAX_PROVISION_PPB",
                  "name": "Calculate and record monthly Tax Provision and PPB Provision",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RIM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_TAX_PROVISION_PPB"
                }
              ]
            },
            {
              "workstream_code": "WS_VAT_DATA_FILING",
              "name": "VAT Data/Filing",
              "task_templates": [
                {
                  "task_template_code": "T_VAT_REPORT_MONTHLY",
                  "name": "Compile, review, record monthly VAT Report (initial and additional entries)",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JAP" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "JPAL" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "RIM" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_VAT_REPORT_MONTHLY"
                },
                {
                  "task_template_code": "T_INPUT_VAT_ENTRIES",
                  "name": "Compile and record monthly Input VAT entries and cumulative VAT summary",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JLI" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "JPAL" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "RIM" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_INPUT_VAT_ENTRIES"
                }
              ]
            },
            {
              "workstream_code": "WS_CA_LIQUIDATIONS",
              "name": "CA Liquidations (All)",
              "task_templates": [
                {
                  "task_template_code": "T_CA_LIQ_PROJECT",
                  "name": "Process and record CA Liquidations for specific project-related expenses",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "LAS" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_CA_LIQ_PROJECT"
                },
                {
                  "task_template_code": "T_CA_LIQ_EMPLOYEE",
                  "name": "Process and record CA Liquidations submitted by employees",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RMQB" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_CA_LIQ_EMPLOYEE"
                }
              ]
            }
          ]
        },
        {
          "phase_code": "PHASE_II_ACCRUALS_AMORTIZATION",
          "name": "Accruals & Amortization",
          "workstreams": [
            {
              "workstream_code": "WS_ACCRUALS_REVENUE_FEES",
              "name": "Accruals (Revenue/Fees)",
              "task_templates": [
                {
                  "task_template_code": "T_ACCRUALS_CONSULTANCY_GENERAL",
                  "name": "Record accruals for Consultancy Fees and routine General Expense accruals",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RIM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "CKVC" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_ACCRUALS_CONSULTANCY_GENERAL"
                },
                {
                  "task_template_code": "T_REVENUE_BILLABLE_COSTS",
                  "name": "Recognize revenue and billable costs; accrue Production/Retainer/Media/Creative/OOPC",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JPAL" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "BOM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_REVENUE_BILLABLE_COSTS"
                }
              ]
            },
            {
              "workstream_code": "WS_AMORTIZATION_IT_FIXED_ASSETS",
              "name": "Amortization (IT/Fixed Assets)",
              "task_templates": [
                {
                  "task_template_code": "T_RENTAL_AMORT_EMP_HOSP",
                  "name": "Record monthly Rental Income/Expense and amortization expense for employee hospitalization plans",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RIM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_RENTAL_AMORT_EMP_HOSP"
                }
              ]
            }
          ]
        },
        {
          "phase_code": "PHASE_III_WIP",
          "name": "WIP",
          "workstreams": [
            {
              "workstream_code": "WS_WIP_OOP_RECON",
              "name": "WIP/OOP Reconciliation",
              "task_templates": [
                {
                  "task_template_code": "T_WIP_OOP_RECON",
                  "name": "Reconcile/reclassify OOP to WIP and WIP to OOP as needed",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JPAL" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_WIP_OOP_RECON"
                },
                {
                  "task_template_code": "T_WIP_SCHED_SUMMARY_PER_JOB",
                  "name": "Prepare WIP schedule summary per Job#",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JRMO" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "JPAL" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "BOM" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_WIP_SCHED_SUMMARY_PER_JOB"
                }
              ]
            }
          ]
        },
        {
          "phase_code": "PHASE_IV_FINAL_ADJUSTMENTS_CLOSE",
          "name": "Final Adjustments & Close",
          "workstreams": [
            {
              "workstream_code": "WS_FINAL_ADJ_REPORTING",
              "name": "Final Adjustments & Close",
              "task_templates": [
                {
                  "task_template_code": "T_TEMP_JE_REVERSAL",
                  "name": "Reverse/adjust temporary JEs; process reversal entries for prior month accruals/reclasses",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RIM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_TEMP_JE_REVERSAL"
                },
                {
                  "task_template_code": "T_REVERSAL_ALL_PRIOR_ACCRUALS",
                  "name": "Process reversal entries for all prior month accruals (trainings/production/retainers)",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "BOM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_REVERSAL_ALL_PRIOR_ACCRUALS"
                },
                {
                  "task_template_code": "T_FLASH_WINS_LOSSES_REVENUE",
                  "name": "Prepare reports for Flash, Wins & Losses, and Revenue",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "BOM" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_FLASH_WINS_LOSSES_REVENUE"
                },
                {
                  "task_template_code": "T_WORKING_CAPITAL_AR",
                  "name": "Prepare reports for Working Capital related to AR",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JPAL" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "BOM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_WORKING_CAPITAL_AR"
                },
                {
                  "task_template_code": "T_AP_AGING_WC",
                  "name": "Prepare AP aging report for working capital submission",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "LAS" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_AP_AGING_WC"
                },
                {
                  "task_template_code": "T_HOW_SUMMARY",
                  "name": "Prepare HOW's summary report",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "LAS" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_HOW_SUMMARY"
                },
                {
                  "task_template_code": "T_GL_RECLASS_MARKETING_RECLASS",
                  "name": "Process GL reclassifications between specific GL accounts and Marketing Expense categories",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "LAS" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_GL_RECLASS_MARKETING_RECLASS"
                },
                {
                  "task_template_code": "T_AP_AGING_DETAILED",
                  "name": "Prepare AP aging report with detailed status per invoice",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JLI" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "LAS" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "RIM" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_AP_AGING_DETAILED"
                },
                {
                  "task_template_code": "T_EXPENSE_RECLASS_WIRELESS_MEALS",
                  "name": "Expense reclassifications (e.g., General Expense to Wireless/Meals)",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "RMQB" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_EXPENSE_RECLASS_WIRELESS_MEALS"
                },
                {
                  "task_template_code": "T_JOB_TRANSFERS_CORP_PROJECTS",
                  "name": "Job transfers between internal codes/job numbers for consultancy/corporate projects",
                  "steps": [
                    { "step_code": "PREP", "name": "Preparation", "default_assignee": "JAP" },
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "JPAL" },
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_JOB_TRANSFERS_CORP_PROJECTS"
                },
                {
                  "task_template_code": "T_FINAL_TB_REVIEW",
                  "name": "Final TB Review",
                  "steps": [
                    { "step_code": "REVIEW", "name": "Review", "default_assignee": "RIM" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_FINAL_TB_REVIEW"
                },
                {
                  "task_template_code": "T_FINAL_TB_SIGNOFF_FILING",
                  "name": "Final TB Sign-off & Filing",
                  "steps": [
                    { "step_code": "APPROVAL", "name": "Approval", "default_assignee": "CKVC" }
                  ],
                  "dedupe_key": "MONTH_END_CLOSE|T_FINAL_TB_SIGNOFF_FILING"
                }
              ]
            }
          ]
        }
      ],

      "instance_overrides": [
        {
          "instance_key": "MONTH_END_CLOSE|2025-11",
          "label": "November 2025 Close (Oct 24–Nov 3 window)",
          "dates": {
            "T_WIP_OOP_RECON": {
              "PREP": "2025-10-29",
              "REVIEW": "2025-10-30",
              "APPROVAL": "2025-10-30"
            },
            "T_WIP_SCHED_SUMMARY_PER_JOB": {
              "PREP": "2025-10-28",
              "REVIEW": "2025-10-29",
              "APPROVAL": "2025-10-29"
            },
            "T_FLASH_WINS_LOSSES_REVENUE": {
              "PREP": "2025-10-30",
              "REVIEW": "2025-11-03",
              "APPROVAL": "2025-11-03"
            }
          },
          "notes": "Use this block to encode per-month hard dates from your sheet. If omitted, dates are computed by policy."
        },
        {
          "instance_key": "MONTH_END_CLOSE|2025-12",
          "label": "December 2025 Close",
          "dates": {},
          "notes": "Dates will be computed from business day policy."
        }
      ]
    }
  ],

  "tax_cycles": [
    {
      "cycle_code": "BIR_TAX_FILING",
      "name": "BIR Filing & Payment",
      "recurrence": { "type": "data_driven", "source": "bir_calendar_rows" },
      "workflow_steps": [
        { "step_code": "PREP", "name": "Prep & File Request", "role": "Finance Supervisor", "default_employee_code": "BOM" },
        { "step_code": "REPORT_APPROVAL", "name": "Report Approval", "role": "Senior Finance Manager", "default_employee_code": "RIM" },
        { "step_code": "PAYMENT_APPROVAL", "name": "Payment Approval", "role": "Finance Director", "default_employee_code": "CKVC" },
        { "step_code": "FILING_PAYMENT", "name": "Filing & Payment", "role": "Finance Supervisor", "default_employee_code": "BOM" }
      ],
      "bir_calendar_rows": [
        {
          "bir_form": "1601-C (Compensation)",
          "period_covered": "Dec 2025",
          "deadline": "2026-01-15",
          "milestones": {
            "PREP": "2026-01-09",
            "REPORT_APPROVAL": "2026-01-12",
            "PAYMENT_APPROVAL": "2026-01-13"
          },
          "dedupe_key": "BIR_TAX_FILING|1601-C|Dec 2025|2026-01-15"
        },
        {
          "bir_form": "1601-C / 0619-E",
          "period_covered": "Jan 2026",
          "deadline": "2026-02-10",
          "milestones": {
            "PREP": "2026-02-04",
            "REPORT_APPROVAL": "2026-02-06",
            "PAYMENT_APPROVAL": "2026-02-09"
          },
          "dedupe_key": "BIR_TAX_FILING|1601-C|Jan 2026|2026-02-10"
        },
        {
          "bir_form": "1601-EQ (Quarterly EWT)",
          "period_covered": "Q4 2025",
          "deadline": "2026-01-30",
          "milestones": {
            "PREP": "2026-01-26",
            "REPORT_APPROVAL": "2026-01-27",
            "PAYMENT_APPROVAL": "2026-01-28"
          },
          "dedupe_key": "BIR_TAX_FILING|1601-EQ|Q4 2025|2026-01-30"
        },
        {
          "bir_form": "2550Q (VAT)",
          "period_covered": "Q1 2026",
          "deadline": "2026-04-27",
          "milestones": {
            "PREP": "2026-04-21",
            "REPORT_APPROVAL": "2026-04-23",
            "PAYMENT_APPROVAL": "2026-04-24"
          },
          "dedupe_key": "BIR_TAX_FILING|2550Q|Q1 2026|2026-04-27"
        }
      ]
    }
  ],

  "dedupe_rules": {
    "template_uniqueness": ["cycle_code", "task_template_code"],
    "instance_uniqueness": ["cycle_code", "instance_key"],
    "generated_task_uniqueness": ["x_cycle_key", "x_task_template_code", "date_deadline", "x_step_code"]
  }
}
